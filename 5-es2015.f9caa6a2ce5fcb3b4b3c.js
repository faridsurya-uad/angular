(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{Iab2:function(t,e,i){var o,n;void 0===(n="function"==typeof(o=function(){"use strict";function e(t,e,i){var o=new XMLHttpRequest;o.open("GET",t),o.responseType="blob",o.onload=function(){c(o.response,e,i)},o.onerror=function(){console.error("could not download file")},o.send()}function i(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(i)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),c=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,a,c){var l=n.URL||n.webkitURL,b=document.createElement("a");b.download=a=a||t.name||"download",b.rel="noopener","string"==typeof t?(b.href=t,b.origin===location.origin?o(b):i(b.href)?e(t,a,c):o(b,b.target="_blank")):(b.href=l.createObjectURL(t),setTimeout((function(){l.revokeObjectURL(b.href)}),4e4),setTimeout((function(){o(b)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,a){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,a),n);else if(i(t))e(t,n,a);else{var c=document.createElement("a");c.href=t,c.target="_blank",setTimeout((function(){o(c)}))}}:function(t,i,o,c){if((c=c||open("","_blank"))&&(c.document.title=c.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,o);var l="application/octet-stream"===t.type,b=/constructor/i.test(n.HTMLElement)||n.safari,d=/CriOS\/[\d]+/.test(navigator.userAgent);if((d||l&&b||a)&&"undefined"!=typeof FileReader){var s=new FileReader;s.onloadend=function(){var t=s.result;t=d?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),c?c.location.href=t:location=t,c=null},s.readAsDataURL(t)}else{var r=n.URL||n.webkitURL,u=r.createObjectURL(t);c?c.location=u:location.href=u,c=null,setTimeout((function(){r.revokeObjectURL(u)}),4e4)}});n.saveAs=c.saveAs=c,t.exports=c})?o.apply(e,[]):o)||(t.exports=n)},jkDv:function(t,e,i){"use strict";i.r(e),i.d(e,"AdminModule",(function(){return B}));var o=i("ofXK"),n=i("fXoL"),a=i("H+bZ"),c=i("tyNb"),l=i("/t3+"),b=i("bTqV"),d=i("NFeN"),s=i("XhcP"),r=i("MutI"),u=i("FKr1");let p=(()=>{class t{constructor(t,e){this.api=t,this.router=e,this.mode="side"}ngOnInit(){this.checkLogin()}checkLogin(){this.api.get("bookswithauth/status").subscribe(t=>{},t=>{this.router.navigate(["/login"])})}logout(){confirm("Keluar aplikasi?")&&(localStorage.removeItem("appToken"),window.location.reload())}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(a.a),n.Ob(c.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-admin"]],decls:30,vars:10,consts:[["color","primary",1,"example-header"],["mat-icon-button","",3,"click"],[1,"uk-width-expand"],["mat-button","",3,"click"],[1,"admin-container"],[1,"sidenav-left",3,"mode","position","opened","fixedInViewport","fixedTopGap","fixedBottomGap"],["sidenav",""],["routerLink","/admin/dashboard"],["matListIcon",""],["matLine",""],["routerLink","/admin/product"],["mode","side",1,"example-sidenav",3,"position","fixedInViewport","fixedTopGap","fixedBottomGap"],[2,"padding","20px","background-color","#ccc"]],template:function(t,e){if(1&t){const t=n.Vb();n.Sb(0),n.Ub(1,"mat-toolbar",0),n.Ub(2,"button",1),n.cc("click",(function(){return n.tc(t),n.rc(14).toggle()})),n.Ub(3,"mat-icon"),n.Ac(4,"menu"),n.Tb(),n.Tb(),n.Ub(5,"span"),n.Ac(6,"My Angular"),n.Tb(),n.Pb(7,"div",2),n.Ub(8,"small"),n.Ac(9,"Admin"),n.Tb(),n.Ub(10,"button",3),n.cc("click",(function(){return e.logout()})),n.Ac(11,"Keluar"),n.Tb(),n.Tb(),n.Ub(12,"mat-sidenav-container",4),n.Ub(13,"mat-sidenav",5,6),n.Ub(15,"mat-nav-list"),n.Ub(16,"mat-list-item",7),n.Ub(17,"mat-icon",8),n.Ac(18,"dashboard"),n.Tb(),n.Ub(19,"h3",9),n.Ac(20,"Dashboard"),n.Tb(),n.Tb(),n.Ub(21,"mat-list-item",10),n.Ub(22,"mat-icon",8),n.Ac(23,"camera_enhance"),n.Tb(),n.Ub(24,"h3",9),n.Ac(25,"Products"),n.Tb(),n.Tb(),n.Tb(),n.Tb(),n.Pb(26,"mat-sidenav",11,6),n.Ub(28,"mat-sidenav-content",12),n.Pb(29,"router-outlet"),n.Tb(),n.Tb(),n.Rb()}2&t&&(n.Cb(13),n.mc("mode",e.mode),n.lc("position","start")("opened",!0)("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0),n.Cb(13),n.lc("position","end")("fixedInViewport",!0)("fixedTopGap",60)("fixedBottomGap",0))},directives:[l.a,b.a,d.a,s.b,s.a,r.d,r.b,c.b,r.a,u.j,s.c,c.d],styles:[".sidenav-left[_ngcontent-%COMP%]{width:250px}.admin-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;position:absolute;top:60px;bottom:0;left:0;right:0}"]}),t})(),f=(()=>{class t{constructor(){this.isOpen=!0}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Ib({type:t,selectors:[["app-dashboard"]],decls:0,vars:0,template:function(t,e){},styles:[".open-close-container[_ngcontent-%COMP%]{border:1px solid #ddd;margin-top:1em;padding:20px 20px 0;color:#000;font-weight:700;font-size:20px}.bottom-right[_ngcontent-%COMP%]{position:fixed;bottom:20px;right:20px}"]}),t})();var g=i("w55g"),h=i("0IaG"),m=i("kmnG"),T=i("qFsG"),U=i("3Pt+");let k=(()=>{class t{constructor(t,e,i){this.dialogRef=t,this.data=e,this.api=i}ngOnInit(){}saveData(){this.loading=!0,null==this.data.id?this.api.post("bookswithauth",this.data).subscribe(t=>{this.dialogRef.close(t),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat menyimpan data")}):this.api.put("bookswithauth/"+this.data.id,this.data).subscribe(t=>{this.dialogRef.close(t),this.loading=!1},t=>{this.loading=!1,alert("Tidak dapat memperbarui data")})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(h.g),n.Ob(h.a),n.Ob(a.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-product-detail"]],decls:28,vars:7,consts:[["mat-dialog-title",""],["mat-dialog-content",""],["appearance","outline",2,"width","100%"],["matInput","",3,"ngModel","ngModelChange"],["matInput","","type","number",3,"ngModel","ngModelChange"],["mat-dialog-actions","","align","end"],["mat-button","","mat-dialog-close",""],["mat-flat-button","",3,"disabled","click"]],template:function(t,e){1&t&&(n.Ub(0,"h3",0),n.Ac(1," Detail Produk "),n.Tb(),n.Ub(2,"div",1),n.Ub(3,"mat-form-field",2),n.Ub(4,"mat-label"),n.Ac(5,"Judul"),n.Tb(),n.Ub(6,"input",3),n.cc("ngModelChange",(function(t){return e.data.title=t})),n.Tb(),n.Tb(),n.Ub(7,"mat-form-field",2),n.Ub(8,"mat-label"),n.Ac(9,"Penulis"),n.Tb(),n.Ub(10,"input",3),n.cc("ngModelChange",(function(t){return e.data.author=t})),n.Tb(),n.Tb(),n.Ub(11,"mat-form-field",2),n.Ub(12,"mat-label"),n.Ac(13,"Penerbit"),n.Tb(),n.Ub(14,"input",3),n.cc("ngModelChange",(function(t){return e.data.publisher=t})),n.Tb(),n.Tb(),n.Ub(15,"mat-form-field",2),n.Ub(16,"mat-label"),n.Ac(17,"ISBN"),n.Tb(),n.Ub(18,"input",3),n.cc("ngModelChange",(function(t){return e.data.isbn=t})),n.Tb(),n.Tb(),n.Ub(19,"mat-form-field",2),n.Ub(20,"mat-label"),n.Ac(21,"Harga"),n.Tb(),n.Ub(22,"input",4),n.cc("ngModelChange",(function(t){return e.data.price=t})),n.Tb(),n.Tb(),n.Tb(),n.Ub(23,"div",5),n.Ub(24,"button",6),n.Ac(25,"Batal"),n.Tb(),n.Ub(26,"button",7),n.cc("click",(function(){return e.saveData()})),n.Ac(27),n.Tb(),n.Tb()),2&t&&(n.Cb(6),n.lc("ngModel",e.data.title),n.Cb(4),n.lc("ngModel",e.data.author),n.Cb(4),n.lc("ngModel",e.data.publisher),n.Cb(4),n.lc("ngModel",e.data.isbn),n.Cb(4),n.lc("ngModel",e.data.price),n.Cb(4),n.lc("disabled",e.loading),n.Cb(1),n.Bc(e.loading?"Menyimpan..":"Simpan"))},directives:[h.h,h.e,m.c,m.f,T.b,U.b,U.j,U.l,U.m,h.c,b.a,h.d],styles:[""]}),t})(),v=(()=>{class t{constructor(t,e,i){this.api=t,this.dialogRef=e,this.dialogData=i}ngOnInit(){console.log(this.dialogData)}onFileChange(t){t.target.files.length>0&&(this.selectedFile=t.target.files[0],console.log(this.selectedFile))}uploadFile(){let t=new FormData;t.append("file",this.selectedFile),this.loadingUpload=!0,this.api.upload(t).subscribe(t=>{this.updateProduct(t),console.log(t)},t=>{this.loadingUpload=!1,alert("Gagal mengunggah file")})}updateProduct(t){1==t.status?(this.updateBook(t),alert("File berhasil diunggah"),this.loadingUpload=!1,this.dialogRef.close()):alert(t.message)}updateBook(t){this.api.put("books/"+this.dialogData.id,{url:t.url}).subscribe(t=>{console.log(t)})}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(a.a),n.Ob(h.g),n.Ob(h.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-file-uploader"]],decls:13,vars:3,consts:[["mat-dialog-title",""],["mat-dialog-content",""],[1,"uk-flex","uk-flex-middle","uk-flex-center",2,"height","100px","outline","2px dashed #ccc","margin","10px",3,"click"],["type","file","id","file",2,"display","none",3,"change"],["fileInput",""],["mat-dialog-actions","","align","right"],["mat-button","","mat-dialog-close",""],["mat-flat-button","","color","primary",3,"disabled","click"]],template:function(t,e){if(1&t){const t=n.Vb();n.Ub(0,"h1",0),n.Ac(1,"Unggah File"),n.Tb(),n.Ub(2,"div",1),n.Ub(3,"div",2),n.cc("click",(function(){return n.tc(t),n.rc(7).click()})),n.Ub(4,"span"),n.Ac(5),n.Tb(),n.Tb(),n.Ub(6,"input",3,4),n.cc("change",(function(t){return e.onFileChange(t)})),n.Tb(),n.Tb(),n.Ub(8,"div",5),n.Ub(9,"button",6),n.Ac(10,"Cancel"),n.Tb(),n.Ub(11,"button",7),n.cc("click",(function(){return e.uploadFile()})),n.Ac(12),n.Tb(),n.Tb()}2&t&&(n.Cb(5),n.Bc(e.selectedFile?e.selectedFile.name:"Pilih File"),n.Cb(6),n.lc("disabled",e.loadingUpload),n.Cb(1),n.Bc(e.loadingUpload?"Uploading..":"Upload"))},directives:[h.h,h.e,h.c,b.a,h.d],styles:[""]}),t})();var w=i("Iab2"),A=i("Xa2L"),x=i("Wp6s");function y(t,e){1&t&&(n.Ub(0,"div",2),n.Pb(1,"mat-spinner"),n.Tb())}function C(t,e){if(1&t){const t=n.Vb();n.Ub(0,"button",12),n.cc("click",(function(){n.tc(t);const e=n.gc().$implicit;return n.gc(2).downloadFile(e)})),n.Ub(1,"mat-icon"),n.Ac(2,"download"),n.Tb(),n.Tb()}}function M(t,e){if(1&t){const t=n.Vb();n.Ub(0,"tr"),n.Ub(1,"td"),n.zc(2,C,3,0,"button",9),n.Tb(),n.Ub(3,"td"),n.Ac(4),n.Tb(),n.Ub(5,"td"),n.Ac(6),n.Tb(),n.Ub(7,"td"),n.Ac(8),n.Tb(),n.Ub(9,"td"),n.Ac(10),n.Tb(),n.Ub(11,"td"),n.Ac(12),n.Tb(),n.Ub(13,"td"),n.Ac(14),n.Tb(),n.Ub(15,"td"),n.Ac(16),n.Tb(),n.Ub(17,"td",7),n.Ub(18,"button",10),n.cc("click",(function(){n.tc(t);const i=e.$implicit;return n.gc(2).uploadFile(i)})),n.Ac(19,"Upload"),n.Tb(),n.Ub(20,"button",10),n.cc("click",(function(){n.tc(t);const i=e.$implicit,o=e.index;return n.gc(2).productDetail(i,o)})),n.Ac(21,"Edit"),n.Tb(),n.Ub(22,"button",11),n.cc("click",(function(){n.tc(t);const i=e.$implicit,o=e.index;return n.gc(2).deleteProduct(i.id,o)})),n.Ac(23),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=e.$implicit,i=e.index,o=n.gc(2);n.Cb(2),n.lc("ngIf",""!=t.url),n.Cb(2),n.Bc(i+1),n.Cb(2),n.Bc(t.title),n.Cb(2),n.Bc(t.author),n.Cb(2),n.Bc(t.publisher),n.Cb(2),n.Bc(t.year),n.Cb(2),n.Bc(t.isbn),n.Cb(2),n.Bc(t.price),n.Cb(6),n.lc("disabled",o.loadingDelete[i]),n.Cb(1),n.Bc(o.loadingDelete[i]?"Deleting..":"Delete")}}function I(t,e){if(1&t){const t=n.Vb();n.Ub(0,"mat-card"),n.Ub(1,"mat-card-header"),n.Ub(2,"mat-card-title"),n.Ac(3),n.Tb(),n.Tb(),n.Ub(4,"mat-card-content"),n.Ub(5,"div",3),n.Pb(6,"span",4),n.Ub(7,"button",5),n.cc("click",(function(){return n.tc(t),n.gc().productDetail({},-1)})),n.Ac(8,"Tambah Produk"),n.Tb(),n.Tb(),n.Ub(9,"table",6),n.Ub(10,"thead"),n.Pb(11,"th"),n.Ub(12,"th"),n.Ac(13,"No"),n.Tb(),n.Ub(14,"th"),n.Ac(15,"Judul"),n.Tb(),n.Ub(16,"th"),n.Ac(17,"Penulis"),n.Tb(),n.Ub(18,"th"),n.Ac(19,"Penerbit"),n.Tb(),n.Ub(20,"th"),n.Ac(21,"Tahun Terbit"),n.Tb(),n.Ub(22,"th"),n.Ac(23,"ISBN"),n.Tb(),n.Ub(24,"th"),n.Ac(25,"Harga"),n.Tb(),n.Ub(26,"th",7),n.Ac(27,"#"),n.Tb(),n.Tb(),n.Ub(28,"tbody"),n.zc(29,M,24,10,"tr",8),n.Tb(),n.Tb(),n.Tb(),n.Tb()}if(2&t){const t=n.gc();n.Cb(3),n.Bc(t.title),n.Cb(26),n.lc("ngForOf",t.books)}}const O=[{path:"",component:p,children:[{path:"dashboard",component:f},{path:"product",component:(()=>{class t{constructor(t,e){this.dialog=t,this.api=e,this.books=[],this.loadingDelete={}}ngOnInit(){this.title="Product",this.getBooks()}getBooks(){this.loading=!0,this.api.get("bookswithauth").subscribe(t=>{this.books=t,this.loading=!1},t=>{this.loading=!1})}productDetail(t,e){this.dialog.open(k,{width:"400px",data:t}).afterClosed().subscribe(i=>{i&&(-1==e?this.books.push(i):this.books[e]=t)})}deleteProduct(t,e){confirm("Delete item?")&&(this.loadingDelete[e]=!0,this.api.delete("bookswithauth/"+t).subscribe(t=>{this.books.splice(e,1),this.loadingDelete[e]=!1},t=>{this.loadingDelete[e]=!1,alert("Tidak dapat menghapus data")}))}uploadFile(t){this.dialog.open(v,{width:"400px",data:t}).afterClosed().subscribe(t=>{})}downloadFile(t){w.saveAs("http://api.sunhouse.co.id/bookstore/"+t.url,"filesaya.pdf")}}return t.\u0275fac=function(e){return new(e||t)(n.Ob(h.b),n.Ob(a.a))},t.\u0275cmp=n.Ib({type:t,selectors:[["app-product"]],decls:2,vars:2,consts:[["style","height: 300px;","class","uk-flex uk-flex-center uk-flex-middle",4,"ngIf"],[4,"ngIf"],[1,"uk-flex","uk-flex-center","uk-flex-middle",2,"height","300px"],[1,"uk-flex"],[1,"uk-width-expand"],["mat-flat-button","","color","primary",3,"click"],[1,"uk-table","uk-table-middle","uk-table-divider"],["align","right"],[4,"ngFor","ngForOf"],["mat-icon-button","",3,"click",4,"ngIf"],["mat-button","","color","primary",3,"click"],["mat-button","","color","warn",3,"disabled","click"],["mat-icon-button","",3,"click"]],template:function(t,e){1&t&&(n.zc(0,y,2,0,"div",0),n.zc(1,I,30,2,"mat-card",1)),2&t&&(n.lc("ngIf",e.loading),n.Cb(1),n.lc("ngIf",!e.loading))},directives:[o.k,A.b,x.a,x.c,x.e,x.b,b.a,o.j,d.a],styles:[""]}),t})()},{path:"",pathMatch:"full",redirectTo:"/admin/dashboard"}]}];let B=(()=>{class t{}return t.\u0275mod=n.Mb({type:t}),t.\u0275inj=n.Lb({factory:function(e){return new(e||t)},imports:[[o.c,c.c.forChild(O),g.a,U.f]]}),t})()}}]);